!function(e){function t(t){for(var r,a,o=t[0],i=t[1],l=t[2],s=0,c=[];s<o.length;s++)a=o[s],O[a]&&c.push(O[a][0]),O[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(M&&M(t);c.length;)c.shift()();return x.push.apply(x,l||[]),n()}function n(){for(var e,t=0;t<x.length;t++){for(var n=x[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==O[o]&&(r=!1)}r&&(x.splice(t--,1),e=D(D.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!j[e]||!k[e])return;for(var n in k[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--y&&0===g&&C()}(e,t),r&&r(e,t)};var a,o=!0,i="ba9c4821cdeb65e3c6e7",l=1e4,s={},c=[],d=[];var u=[],f="idle";function p(e){f=e;for(var t=0;t<u.length;t++)u[t].call(null,e)}var h,m,v,y=0,g=0,b={},k={},j={};function E(e){return+e+""===e?+e:e}function w(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return o=e,p("check"),(t=l,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=D.p+""+i+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return p("idle"),null;k={},b={},j=e.c,v=e.h,p("prepare");var t=new Promise(function(e,t){h={resolve:e,reject:t}});for(var n in m={},O)_(n);return"prepare"===f&&0===g&&0===y&&C(),t});var t}function _(e){j[e]?(k[e]=!0,y++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=D.p+""+e+"."+i+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function C(){p("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then(function(){return S(o)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(E(n));e.resolve(t)}}function S(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,a,o,l;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var a=r.pop(),i=a.id,l=a.chain;if((o=P[i])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:i};if(o.hot._main)return{type:"unaccepted",chain:l,moduleId:i};for(var s=0;s<o.parents.length;s++){var c=o.parents[s],d=P[c];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:l.concat([c]),moduleId:i,parentId:c};-1===t.indexOf(c)&&(d.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),u(n[c],[i])):(delete n[c],t.push(c),r.push({chain:l.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var h={},y=[],g={},b=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var k in m)if(Object.prototype.hasOwnProperty.call(m,k)){var w;l=E(k);var _=!1,C=!1,S=!1,x="";switch((w=m[k]?d(l):{type:"disposed",moduleId:k}).chain&&(x="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(_=new Error("Aborted because of self decline: "+w.moduleId+x));break;case"declined":t.onDeclined&&t.onDeclined(w),t.ignoreDeclined||(_=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+x));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(w),t.ignoreUnaccepted||(_=new Error("Aborted because "+l+" is not accepted"+x));break;case"accepted":t.onAccepted&&t.onAccepted(w),C=!0;break;case"disposed":t.onDisposed&&t.onDisposed(w),S=!0;break;default:throw new Error("Unexception type "+w.type)}if(_)return p("abort"),Promise.reject(_);if(C)for(l in g[l]=m[l],u(y,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,l)&&(h[l]||(h[l]=[]),u(h[l],w.outdatedDependencies[l]));S&&(u(y,[w.moduleId]),g[l]=b)}var z,H=[];for(r=0;r<y.length;r++)l=y[r],P[l]&&P[l].hot._selfAccepted&&H.push({module:l,errorHandler:P[l].hot._selfAccepted});p("dispose"),Object.keys(j).forEach(function(e){!1===j[e]&&function(e){delete O[e]}(e)});for(var N,M,T=y.slice();T.length>0;)if(l=T.pop(),o=P[l]){var I={},R=o.hot._disposeHandlers;for(a=0;a<R.length;a++)(n=R[a])(I);for(s[l]=I,o.hot.active=!1,delete P[l],delete h[l],a=0;a<o.children.length;a++){var A=P[o.children[a]];A&&((z=A.parents.indexOf(l))>=0&&A.parents.splice(z,1))}}for(l in h)if(Object.prototype.hasOwnProperty.call(h,l)&&(o=P[l]))for(M=h[l],a=0;a<M.length;a++)N=M[a],(z=o.children.indexOf(N))>=0&&o.children.splice(z,1);for(l in p("apply"),i=v,g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l]);var L=null;for(l in h)if(Object.prototype.hasOwnProperty.call(h,l)&&(o=P[l])){M=h[l];var q=[];for(r=0;r<M.length;r++)if(N=M[r],n=o.hot._acceptedDependencies[N]){if(-1!==q.indexOf(n))continue;q.push(n)}for(r=0;r<q.length;r++){n=q[r];try{n(M)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:M[r],error:e}),t.ignoreErrored||L||(L=e)}}}for(r=0;r<H.length;r++){var G=H[r];l=G.module,c=[l];try{D(l)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:e}),t.ignoreErrored||L||(L=n),L||(L=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||L||(L=e)}}return L?(p("fail"),Promise.reject(L)):(p("idle"),new Promise(function(e){e(y)}))}var P={},O={2:0},x=[];function D(t){if(P[t])return P[t].exports;var n=P[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:a!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:w,apply:S,status:function(e){if(!e)return f;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:s[e]};return a=void 0,t}(t),parents:(d=c,c=[],d),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=P[e];if(!t)return D;var n=function(n){return t.hot.active?(P[n]?-1===P[n].parents.indexOf(e)&&P[n].parents.push(e):(c=[e],a=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),c=[]),D(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return D[e]},set:function(t){D[e]=t}}};for(var o in D)Object.prototype.hasOwnProperty.call(D,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(e){return"ready"===f&&p("prepare"),g++,D.e(e).then(t,function(e){throw t(),e});function t(){g--,"prepare"===f&&(b[e]||_(e),0===g&&0===y&&C())}},n.t=function(e,t){return 1&t&&(e=n(e)),D.t(e,-2&t)},n}(t)),n.l=!0,n.exports}D.m=e,D.c=P,D.d=function(e,t,n){D.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},D.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},D.t=function(e,t){if(1&t&&(e=D(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(D.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)D.d(n,r,function(t){return e[t]}.bind(null,r));return n},D.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return D.d(t,"a",t),t},D.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},D.p="",D.h=function(){return i};var z=window.webpackJsonp=window.webpackJsonp||[],H=z.push.bind(z);z.push=t,z=z.slice();for(var N=0;N<z.length;N++)t(z[N]);var M=H;x.push([371,0,4]),n()}({371:function(e,t,n){"use strict";var r,a,o,i,l,s,c,d,u,f,p,h,m,v,y,g,b,k,j,E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=M(n(1)),_=M(n(12)),C=M(n(86)),S=M(n(93)),P=n(81),O=M(n(114)),x=n(372),D=(M(x),M(n(373))),z=n(11),H=n(22),N=M(n(381));M(n(386));function M(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function q(e,t,n,r,a){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G,U,F,B,X=S.default.get("csrftoken"),J=S.default.get("token"),V=document.getElementById("dialog-root"),W=document.getElementById("map-root"),Y="/static/image/blank_profile.png",Z=[25.047779,121.517133],K=50,Q={icon:L.ExtraMarkers.icon({icon:"fa-circle",prefix:"fas",markerColor:"cyan"})},$={icon:L.ExtraMarkers.icon({icon:"fa-star",prefix:"fas",markerColor:"orange"}),zIndexOffset:1e3},ee={icon:L.ExtraMarkers.icon({icon:"fa-flag",prefix:"fas",markerColor:"cyan"})},te=(0,z.observable)({mock:Z,basicArray:[],trackId:[],page:1,scroll:!1,showError:!1,errorMsg:""});te.updatePosition=function(e,t){var n=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var r=[t.coords.latitude,t.coords.longitude];n.mock=r,console.log(r),e&&e(r)},function(e){console.log(e.code),t&&t(e)}):console.log("Geolocation is not supported by this browser.")},te.setPositionMarker=function(e,t){G.setView(e,t),F.clearLayers(),L.circleMarker(e,{fillOpacity:.5}).addTo(F),F.addTo(G)},te.setTrackMarker=function(e,t){G.setView(e,t),B.clearLayers(),L.marker(e,$).addTo(B),B.addTo(G)},te.getTrackId=function(){var e=this;(0,C.default)({method:"get",url:"/history/",headers:{"X-CSRFToken":X}}).then(function(t){e.trackId=t.data.victims.map(function(e){return e.identify}).reverse()})},te.updatePage=function(){var e=this;(0,C.default)({method:"get",url:"https://gethornet.com/api/v3/members/near.json?page="+this.page+"&per_page=50",headers:{Authorization:"Hornet "+J,"X-Device-Location":this.mock[0]+","+this.mock[1]},onDownloadProgress:function(e){}}).then(function(t){e.scroll=!1;var n=(0,z.toJS)(e.basicArray),r=n.map(function(e){return e.id});t.data.members.map(function(e){var t=e.member,a=t.id;r.includes(a)||n.push(t)}),1===e.page&&(n=n.slice(1)),e.basicArray=n,e.page=e.page+1})},te.reFreshPage=function(){this.basicArray=[],this.page=1,this.updatePage()},te.mockTo=function(e){this.mock=e,U.clearLayers(),L.marker(e,ee).addTo(U),U.addTo(G),this.reFreshPage()},te.onMapClick=function(e){var t=[e.latlng.lat,e.latlng.lng];te.mockTo(t)},te.accurateRequest=function(e,t,n){var r=this;(0,C.default)({method:"get",url:"https://volta.gethornet.com/api/v3/members/"+e+"/public.json",headers:{Authorization:"Hornet "+J}}).then(function(a){var o=a.data.member.id;if(a.data.member.distance)(0,C.default)({method:"post",url:"/accurate/",headers:{"X-CSRFToken":X},timeout:6e4,data:{name:e}}).then(function(n){var r=n.data,a=[r.lat,r.lng],i=(0,z.toJS)(te.trackId);if(i.includes(o)){var l=i.indexOf(o);i.splice(l,1)}te.trackId=[o].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i)),te.setTrackMarker(a,18),t&&t(),ga("send",{hitType:"event",eventCategory:"track",eventAction:"success",eventLabel:e})}).catch(function(t){r.errorMsg="Ohh! Magic fails, please try again.",r.showError=!0,setTimeout(function(){r.showError=!1},3e3),n&&n(),t.response?r.sendErrorToGA(e,t.response.status):r.sendErrorToGA(e,t.code)});else{r.errorMsg="This id do not show distance",r.showError=!0,setTimeout(function(){r.showError=!1},3e3),n&&n();r.sendErrorToGA(e,"not show distance")}}).catch(function(t){r.errorMsg="This id do not exist or not public",r.showError=!0,setTimeout(function(){r.showError=!1},3e3),n&&n();r.sendErrorToGA(e,"not found")})},te.roughRequest=function(e){(0,C.default)({method:"post",url:"/rough/",headers:{"X-CSRFToken":X},data:{name:e}}).then(function(e){var t=e.data;(0,C.default)({method:"get",url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+t.lat+","+t.lng+"&key=AIzaSyBtak-BMvNWuWY6P1qUt2zj2U7oTH2SeaU"}).then(function(e){console.log(e)}).catch(function(e){})}).catch(function(e){})},te.sendErrorToGA=function(e,t){ga("send",{hitType:"event",eventCategory:"track",eventAction:"error",eventLabel:t+" "+e})},te.footprintRequest=function(e,t,n){(0,C.default)({method:"post",url:"/footprint/",headers:{"X-CSRFToken":X},data:{id:e}}).then(function(e){var n=e.data.foot,r=n.slice(-1)[0];G.setView([r.latitude,r.longitude],14),B.clearLayers(),n.map(function(e,t,n){var r=[e.latitude,e.longitude];t==n.length-1?L.marker(r,$).addTo(B):L.marker(r,Q).addTo(B)}),B.addTo(G),t&&t()}).catch(function(e){n&&n()})};var ne=(0,P.withRouter)(r=(0,H.observer)((a=function(e){function t(e){I(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T(n,"detail",o,n),T(n,"sync",i,n),n.onGlobeClick=n.onGlobeClick.bind(n),n.onStarClick=n.onStarClick.bind(n),n.onSyncClick=n.onSyncClick.bind(n),n}return A(t,w.default.Component),E(t,[{key:"componentDidMount",value:function(){var e=this;(0,C.default)({method:"get",url:"https://volta.gethornet.com/api/v3/members/"+this.props.id+".json",headers:{Authorization:"Hornet "+J},onDownloadProgress:function(e){}}).then(function(t){e.detail=t.data.member})}},{key:"render",value:function(){var e=this,t=this.detail,n=null;if(t){var r=(0,N.default)(Date.now()),a=(0,N.default)(t.last_online),o=N.default.duration(r.diff(a)),i=o.days(),l=o.hours(),s=o.minutes();i?n=i+" day":l?n=l+" hour":s&&(n=s+" minute")}var c={display:"flex",alignItems:"center"};return w.default.createElement("div",null,w.default.createElement("div",{className:"dialog"},t&&w.default.createElement("div",{className:"dialog-wrapper"},w.default.createElement("div",{className:"dialog-content"},w.default.createElement("div",{className:"dialog-topbar"},w.default.createElement("img",{className:"topbar-sticky",src:t.photos.length?t.photos[0].photo.thumbnail_url:Y}),w.default.createElement("div",{className:"topbar-account"},t.display_name?w.default.createElement("div",{className:"displayname"},t.display_name):null,w.default.createElement("div",{className:"username"},"@"+t.account.username),w.default.createElement("div",{className:"identity"},w.default.createElement("span",{className:"fitness"},t.height?t.height:"."),w.default.createElement("span",{className:"fitness"},t.weight?parseInt(t.weight/1e3):"."),w.default.createElement("span",{className:"fitness"},t.age?t.age:"."),t.identity?w.default.createElement("span",{className:"fitness"},t.identity.title):null)),w.default.createElement("div",{className:"topbar-widget-wrapper"},this.props.islover?w.default.createElement("div",{className:"fas fa-globe topbar-widget",onClick:function(){e.onGlobeClick(t.id)}}):w.default.createElement("div",{className:"fas fa-star topbar-widget",onClick:this.onStarClick}),w.default.createElement("div",{className:"fas fa-sync-alt topbar-widget "+(this.sync?"icon-rotate":""),onClick:function(){e.onSyncClick(t.account.username)}}))),w.default.createElement("div",{className:"private-info"},w.default.createElement("div",{style:c},w.default.createElement("i",{className:"fas fa-circle",style:t.online?{fontSize:"12px",paddingRight:"5px",color:"springgreen"}:{fontSize:"12px",paddingRight:"5px",color:"lightgray"}}),w.default.createElement("span",null,t.online?"online":n+" ago")),t.distance?w.default.createElement("div",{style:c},w.default.createElement("i",{className:"fas fa-location-arrow",style:{fontSize:"13px",paddingRight:"5px",color:"cornflowerblue"}}),w.default.createElement("span",null,t.distance+" km")):null,w.default.createElement("div",{style:c},w.default.createElement("i",{className:"fas fa-user",style:{fontSize:"12px",paddingRight:"5px",color:"orange"}}),w.default.createElement("span",{onClick:function(){e.props.history.push(e.props.match.url+"/f")}},t.followers_count))),t.about_you?w.default.createElement("div",{className:"about-you"},t.about_you):null),w.default.createElement("div",{className:"gallery"},w.default.createElement(O.default,{pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},resistanceRatio:0},t.photos.length?t.photos.map(function(e,t){return w.default.createElement("div",{key:t},w.default.createElement("img",{className:"gallery-img",src:e.photo.full_large_url}))}):w.default.createElement("div",null,w.default.createElement("img",{className:"gallery-img",src:Y})))),w.default.createElement(P.Route,{path:this.props.match.url+"/f",render:function(){return _.default.createPortal(w.default.createElement(re,{id:e.props.id,fansnum:t.followers_count}),V)}}))))}},{key:"onGlobeClick",value:function(e){te.footprintRequest(e)}},{key:"onStarClick",value:function(){}},{key:"onSyncClick",value:function(e){var t=this;if(!this.sync){this.sync=!0;te.accurateRequest(e,function(){t.sync=!1}.bind(this),function(){t.sync=!1}.bind(this))}}}]),t}(),o=q(a.prototype,"detail",[z.observable],{enumerable:!0,initializer:function(){return null}}),i=q(a.prototype,"sync",[z.observable],{enumerable:!0,initializer:function(){return!1}}),r=a))||r)||r,re=(0,P.withRouter)(l=(0,H.observer)((s=function(e){function t(e){I(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T(n,"fans",c,n),n.page=1,n.per_page=25,n.scroll=!1,n.handleScroll=n.handleScroll.bind(n),n}return A(t,w.default.Component),E(t,[{key:"render",value:function(){var e=this;return w.default.createElement("div",{className:"dialog",ref:function(t){e.scrollDom=t},onScroll:function(){e.handleScroll()}},w.default.createElement("div",{className:"group"},this.fans.map(function(e){return w.default.createElement(ae,{key:e.id,basic:e})})))}},{key:"componentDidMount",value:function(){this.updatePage()}},{key:"updatePage",value:function(){var e=this;(0,C.default)({method:"get",url:"https://gethornet.com/api/v3/members/"+this.props.id+"/followers?page="+this.page+"&per_page="+this.per_page,headers:{Authorization:"Hornet "+J},onDownloadProgress:function(e){}}).then(function(t){var n=(0,z.toJS)(e.fans),r=n.map(function(e){return e.id});t.data.members.map(function(e){var t=e.member,a=t.id;r.includes(a)||n.push(t)}),e.fans=n,e.page=e.page+1,e.scroll=!1})}},{key:"handleScroll",value:function(){var e=this.scrollDom,t=e.scrollHeight-e.clientHeight-e.scrollTop<=50,n=this.per_page*(this.page-1),r=this.props.fansnum;!this.scroll&&t&&n<r&&(this.scroll=!0,this.updatePage())}}]),t}(),c=q(s.prototype,"fans",[z.observable],{enumerable:!0,initializer:function(){return[]}}),l=s))||l)||l,ae=(0,P.withRouter)(d=(0,H.observer)((u=function(e){function t(e){I(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T(n,"detail",f,n),T(n,"loaded",p,n),T(n,"press",h,n),T(n,"sync",m,n),n.getMemberInfo=n.getMemberInfo.bind(n),n.onSyncClick=n.onSyncClick.bind(n),n.onGlobeClick=n.onGlobeClick.bind(n),n}return A(t,w.default.Component),E(t,[{key:"render",value:function(){var e=this,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0;if(this.props.basic){var l=this.props.basic;t=l.id,n=l.account.username,r=l.thumbnail_large_url,a=l.online,o=l.display_name,i=!1}else if(this.detail){var s=this.detail;t=s.id,n=s.account.username,r=s.photos.length?s.photos[0].photo.thumbnail_large_url:null,a=s.online,o=s.display_name,i=!0}var c="/"!=this.props.match.url?this.props.match.url+"/"+t:"/p/"+t,d={filter:this.press?"brightness(40%)":""},u={display:this.press?"flex":"none"},f={display:this.sync?"none":""},p={fontSize:this.sync?"30px":""};return w.default.createElement("div",{className:"member"},w.default.createElement(D.default,{onPress:function(){e.press=!0},pressDelay:600,onTap:function(){e.props.history.push(c)}},w.default.createElement("img",{className:"sticky",style:d,src:r&&this.loaded?r:Y,onLoad:function(){e.loaded=!0},onContextMenu:function(e){e.preventDefault()}})),w.default.createElement("div",{className:"tool-wrapper",style:u,onContextMenu:function(e){e.preventDefault()}},w.default.createElement("i",{className:"tool fas fa-info",style:f,onClick:function(){e.props.history.push(c),e.press=!1}}),i?w.default.createElement("i",{className:"tool fas fa-globe",style:f,onClick:function(){e.onGlobeClick(t)}}):null,w.default.createElement("i",{className:"tool fas "+(this.sync?"fa-spinner icon-rotate":"fa-sync-alt"),style:p,onClick:function(){e.onSyncClick(n)}})),w.default.createElement("div",{className:a?"online":"offline"}),w.default.createElement("div",{className:"display"},o),w.default.createElement(P.Route,{path:c,render:function(){return _.default.createPortal(w.default.createElement(ne,{id:t,islover:i}),V)}}))}},{key:"onSyncClick",value:function(e){var t=this;if(!this.sync){this.sync=!0,console.log(e);te.accurateRequest(e,function(){t.press=!1,t.sync=!1}.bind(this),function(){t.press=!1,t.sync=!1}.bind(this))}}},{key:"onGlobeClick",value:function(e){var t=this;te.footprintRequest(e,function(){t.press=!1}.bind(this),function(){t.press=!1}.bind(this))}},{key:"componentDidMount",value:function(){this.props.basic||this.getMemberInfo()}},{key:"getMemberInfo",value:function(){var e=this;(0,C.default)({method:"get",url:"https://volta.gethornet.com/api/v3/members/"+this.props.id+".json",headers:{Authorization:"Hornet "+J},onDownloadProgress:function(e){}}).then(function(t){e.detail=t.data.member}).catch(function(t){console.log(t),404==t.response.status&&(0,C.default)({method:"post",url:"/clear/",headers:{"X-CSRFToken":X},data:{id:e.props.id}}).then(function(t){var n=te.trackId.indexOf(e.props.id);te.trackId.splice(n,1)})})}}]),t}(),f=q(u.prototype,"detail",[z.observable],{enumerable:!0,initializer:function(){return null}}),p=q(u.prototype,"loaded",[z.observable],{enumerable:!0,initializer:function(){return!1}}),h=q(u.prototype,"press",[z.observable],{enumerable:!0,initializer:function(){return!1}}),m=q(u.prototype,"sync",[z.observable],{enumerable:!0,initializer:function(){return!1}}),d=u))||d)||d,oe=(0,P.withRouter)(v=(0,H.observer)((y=function(e){function t(e){I(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T(n,"navigator",g,n),n.onPlaneClick=n.onPlaneClick.bind(n),n.onLoveClick=n.onLoveClick.bind(n),n.handleScroll=n.handleScroll.bind(n),n.y_last=0,n.onStartHandler=n.onStartHandler.bind(n),n.onDragHandler=n.onDragHandler.bind(n),n.onStopHandler=n.onStopHandler.bind(n),n}return A(t,w.default.Component),E(t,[{key:"render",value:function(){var e=this;this.onStartHandler,this.onStopHandler,this.onDragHandler;return w.default.createElement("div",{className:"panel"},w.default.createElement("div",{id:"navigator"},w.default.createElement("div",{className:"nav-icon-wrapper"},w.default.createElement("i",{className:"nav-icon fa-paper-plane "+(0==this.navigator?"fas":"far"),onClick:this.onPlaneClick})),w.default.createElement("div",{className:"nav-icon-wrapper"},w.default.createElement("i",{className:"nav-icon fa-heart "+(1==this.navigator?"fas":"far"),onClick:this.onLoveClick}))),w.default.createElement("div",{className:"group-wrapper",ref:function(t){e.drag=t},onScroll:function(){0==e.navigator&&e.handleScroll()}},w.default.createElement("div",{className:"group",ref:function(t){e.nearby=t}},te.basicArray.map(function(e){return w.default.createElement(ae,{key:e.id,basic:e})})),w.default.createElement("div",{className:"group",ref:function(t){e.love=t}},te.trackId.map(function(e){return w.default.createElement(ae,{key:e,id:e})}))))}},{key:"componentDidMount",value:function(){te.getTrackId(),this.onPlaneClick()}},{key:"handleScroll",value:function(){var e=this.drag,t=e.scrollHeight-e.clientHeight-e.scrollTop<=50;!te.scroll&&t&&(te.scroll=!0,te.updatePage())}},{key:"onPlaneClick",value:function(){this.navigator=0,this.nearby.style.display="grid",this.love.style.display="none"}},{key:"onLoveClick",value:function(){this.navigator=1,this.love.style.display="grid",this.nearby.style.display="none"}},{key:"onStartHandler",value:function(e,t){}},{key:"onDragHandler",value:function(e,t){}},{key:"onStopHandler",value:function(e,t){}}]),t}(),g=q(y.prototype,"navigator",[z.observable],{enumerable:!0,initializer:function(){return 0}}),v=y))||v)||v,ie=(0,P.withRouter)(b=(0,H.observer)((k=function(e){function t(e){I(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T(n,"search",j,n),n.time=Date.now(),n.velocity=0,n.y_last=0,n.maxdrag=-(window.innerHeight-K),n.draw=!1,n.onStopHandler=n.onStopHandler.bind(n),n.onDragHandler=n.onDragHandler.bind(n),n.onStartHandler=n.onStartHandler.bind(n),n.inertiaDrag=n.inertiaDrag.bind(n),n.onResize=n.onResize.bind(n),n.onPencilClick=n.onPencilClick.bind(n),n.onMyPlaceClick=n.onMyPlaceClick.bind(n),n.onSubmitId=n.onSubmitId.bind(n),n}return A(t,w.default.Component),E(t,[{key:"render",value:function(){var e=this,t={handle:"#navigator",onStart:this.onStartHandler,onStop:this.onStopHandler,onDrag:this.onDragHandler},n={opacity:""+(te.showError?1:0),display:te.showError?"block":"none"};return w.default.createElement("div",null,w.default.createElement("div",{id:"search"},w.default.createElement("div",{className:"search-overlay",style:{display:this.search?"block":"none"}}),w.default.createElement("label",{className:"search-icon "+(this.search?"fa fa-spinner icon-rotate":"fa fa-search"),htmlFor:"search-id"}),w.default.createElement("form",{id:"sform",onSubmit:function(t){e.onSubmitId(t)}},w.default.createElement("input",{id:"search-id",type:"text",placeholder:"Hornet Id",autoComplete:"off",ref:function(t){e.input=t}}))),w.default.createElement("div",{className:"search-status showfade",style:n},te.errorMsg),w.default.createElement(x.DraggableCore,t,w.default.createElement("div",{className:"dragger",ref:function(t){e.drag=t}},w.default.createElement(oe,null))),_.default.createPortal(w.default.createElement("div",{id:"mapid",ref:function(t){e.map=t}}),W),w.default.createElement("div",{className:"widget-wrapper",ref:function(t){e.icon=t}},w.default.createElement("i",{className:"fas fa-pencil-alt widget",onClick:this.onPencilClick,ref:function(t){e.pencil=t}}),w.default.createElement("i",{className:"material-icons widget",onClick:this.onMyPlaceClick,ref:function(t){e.mylocation=t}},"my_location")))}},{key:"onSubmitId",value:function(e){var t=this;e.preventDefault();var n=this.input.value.replace("@","");this.input.blur(),this.search=!0;te.accurateRequest(n,function(){t.search=!1,t.input.value=null}.bind(this),function(){t.search=!1}.bind(this))}},{key:"componentDidMount",value:function(){G=L.map("mapid",{zoomControl:!1,minZoom:3}),U=L.layerGroup().addTo(G),F=L.layerGroup().addTo(G),B=L.layerGroup().addTo(G),L.gridLayer.googleMutant({type:"roadmap"}).addTo(G),this.onMyPlaceClick(),window.addEventListener("resize",this.onResize)}},{key:"onResize",value:function(){var e=-(window.innerHeight-K),t=Math.abs(this.y_last/this.maxdrag)*e;this.drag.style.top=-(e-t)+"px",this.map.style.height=-(e-t)+"px",-(e/2-t)>=0&&(this.icon.style.bottom=K-t+"px",G.invalidateSize()),this.y_last=t,this.maxdrag=e}},{key:"onMyPlaceClick",value:function(){te.updatePosition(function(e){te.setPositionMarker(e,18),te.mockTo(e)},function(){te.setPositionMarker(Z,7),te.mockTo(Z)})}},{key:"onPencilClick",value:function(){this.draw=!this.draw,this.draw?(G.addEventListener("click",te.onMapClick),this.pencil.style.color="dodgerblue"):(G.removeEventListener("click",te.onMapClick),this.pencil.style.color="dimgray")}},{key:"onStartHandler",value:function(e,t){this.time=Date.now()}},{key:"onDragHandler",value:function(e,t){var n=this.maxdrag,r=this.y_last,a=this.time,o=Date.now(),i=o-a,l=t.deltaY,s=l/i,c=r+l;c<n?c=n:c>0&&(c=0),this.drag.style.top=-(n-c)+"px",this.drag.style.height=K-c+"px",this.map.style.height=-(n-c)+"px",-(n/2-c)>=0&&(this.icon.style.bottom=K-c+"px",G.invalidateSize()),this.time=o,this.velocity=s,this.y_last=c}},{key:"onStopHandler",value:function(e,t){this.inertiaDrag()}},{key:"inertiaDrag",value:function(){var e=this,t=this.maxdrag,n=Math.sign(this.velocity),r=Math.abs(this.velocity)>.5?.5*n:this.velocity,a=this.y_last,o=.9,i=-1/Math.log(o)*17.6;!function n(){r*=o;var l=i*r;0!=a&&a!=t&&Math.abs(l)>5?((a+=l)<=t?a=t:a>=0&&(a=0),requestAnimationFrame(n),e.drag.style.top=-(t-a)+"px",e.drag.style.height=K-a+"px",e.map.style.height=-(t-a)+"px",-(t/2-a)>=0&&(e.icon.style.bottom=K-a+"px",G.invalidateSize())):(e.y_last=a,e.velocity=0)}()}}]),t}(),j=q(k.prototype,"search",[z.observable],{enumerable:!0,initializer:function(){return!1}}),b=k))||b)||b;e.hot.accept(),_.default.render(w.default.createElement(P.BrowserRouter,null,w.default.createElement(ie,null)),document.getElementById("panel-root"))},384:function(e,t,n){var r={"./af":116,"./af.js":116,"./ar":117,"./ar-dz":118,"./ar-dz.js":118,"./ar-kw":119,"./ar-kw.js":119,"./ar-ly":120,"./ar-ly.js":120,"./ar-ma":121,"./ar-ma.js":121,"./ar-sa":122,"./ar-sa.js":122,"./ar-tn":123,"./ar-tn.js":123,"./ar.js":117,"./az":124,"./az.js":124,"./be":125,"./be.js":125,"./bg":126,"./bg.js":126,"./bm":127,"./bm.js":127,"./bn":128,"./bn.js":128,"./bo":129,"./bo.js":129,"./br":130,"./br.js":130,"./bs":131,"./bs.js":131,"./ca":132,"./ca.js":132,"./cs":133,"./cs.js":133,"./cv":134,"./cv.js":134,"./cy":135,"./cy.js":135,"./da":136,"./da.js":136,"./de":137,"./de-at":138,"./de-at.js":138,"./de-ch":139,"./de-ch.js":139,"./de.js":137,"./dv":140,"./dv.js":140,"./el":141,"./el.js":141,"./en-au":142,"./en-au.js":142,"./en-ca":143,"./en-ca.js":143,"./en-gb":144,"./en-gb.js":144,"./en-ie":145,"./en-ie.js":145,"./en-il":146,"./en-il.js":146,"./en-nz":147,"./en-nz.js":147,"./eo":148,"./eo.js":148,"./es":149,"./es-do":150,"./es-do.js":150,"./es-us":151,"./es-us.js":151,"./es.js":149,"./et":152,"./et.js":152,"./eu":153,"./eu.js":153,"./fa":154,"./fa.js":154,"./fi":155,"./fi.js":155,"./fo":156,"./fo.js":156,"./fr":157,"./fr-ca":158,"./fr-ca.js":158,"./fr-ch":159,"./fr-ch.js":159,"./fr.js":157,"./fy":160,"./fy.js":160,"./gd":161,"./gd.js":161,"./gl":162,"./gl.js":162,"./gom-latn":163,"./gom-latn.js":163,"./gu":164,"./gu.js":164,"./he":165,"./he.js":165,"./hi":166,"./hi.js":166,"./hr":167,"./hr.js":167,"./hu":168,"./hu.js":168,"./hy-am":169,"./hy-am.js":169,"./id":170,"./id.js":170,"./is":171,"./is.js":171,"./it":172,"./it.js":172,"./ja":173,"./ja.js":173,"./jv":174,"./jv.js":174,"./ka":175,"./ka.js":175,"./kk":176,"./kk.js":176,"./km":177,"./km.js":177,"./kn":178,"./kn.js":178,"./ko":179,"./ko.js":179,"./ky":180,"./ky.js":180,"./lb":181,"./lb.js":181,"./lo":182,"./lo.js":182,"./lt":183,"./lt.js":183,"./lv":184,"./lv.js":184,"./me":185,"./me.js":185,"./mi":186,"./mi.js":186,"./mk":187,"./mk.js":187,"./ml":188,"./ml.js":188,"./mn":189,"./mn.js":189,"./mr":190,"./mr.js":190,"./ms":191,"./ms-my":192,"./ms-my.js":192,"./ms.js":191,"./mt":193,"./mt.js":193,"./my":194,"./my.js":194,"./nb":195,"./nb.js":195,"./ne":196,"./ne.js":196,"./nl":197,"./nl-be":198,"./nl-be.js":198,"./nl.js":197,"./nn":199,"./nn.js":199,"./pa-in":200,"./pa-in.js":200,"./pl":201,"./pl.js":201,"./pt":202,"./pt-br":203,"./pt-br.js":203,"./pt.js":202,"./ro":204,"./ro.js":204,"./ru":205,"./ru.js":205,"./sd":206,"./sd.js":206,"./se":207,"./se.js":207,"./si":208,"./si.js":208,"./sk":209,"./sk.js":209,"./sl":210,"./sl.js":210,"./sq":211,"./sq.js":211,"./sr":212,"./sr-cyrl":213,"./sr-cyrl.js":213,"./sr.js":212,"./ss":214,"./ss.js":214,"./sv":215,"./sv.js":215,"./sw":216,"./sw.js":216,"./ta":217,"./ta.js":217,"./te":218,"./te.js":218,"./tet":219,"./tet.js":219,"./tg":220,"./tg.js":220,"./th":221,"./th.js":221,"./tl-ph":222,"./tl-ph.js":222,"./tlh":223,"./tlh.js":223,"./tr":224,"./tr.js":224,"./tzl":225,"./tzl.js":225,"./tzm":226,"./tzm-latn":227,"./tzm-latn.js":227,"./tzm.js":226,"./ug-cn":228,"./ug-cn.js":228,"./uk":229,"./uk.js":229,"./ur":230,"./ur.js":230,"./uz":231,"./uz-latn":232,"./uz-latn.js":232,"./uz.js":231,"./vi":233,"./vi.js":233,"./x-pseudo":234,"./x-pseudo.js":234,"./yo":235,"./yo.js":235,"./zh-cn":236,"./zh-cn.js":236,"./zh-hk":237,"./zh-hk.js":237,"./zh-tw":238,"./zh-tw.js":238};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=384}});